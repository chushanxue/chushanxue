### 1、React是什么？有哪些特性？设计思想是？

React是用于构建**用户界面**的JS库

React的设计思想是组件化、数据驱动视图、虚拟DOM

React的特性有：（**着重介绍声明式编程和组件化**）

- JSX 语法
- 单向数据绑定
- 虚拟 DOM
- **声明式编程**

  **表达逻辑而不显式地定义步骤**

  有两个显著的优点：1、代码的可读性特别高，易于维护 2、不关心具体的实现，方便我们进行分工协作。

- **组件化**

  通常将应用程序的整个逻辑分解为小的单个部分，我们将每个单独的部分称为组件。

  组件通常是一个函数，接受数据输入，并返回在UI中呈现的React元素

  - 可组合：每个组件易于和其它组件一起使用，或者嵌套在另一个组件内部
  - 可重用：每个组件都是具有独立功能的，它可以被使用在多个 UI 场景
  - 可维护：每个小的组件仅仅包含自身的逻辑，更容易被理解和维护

### 2、JSX是什么，它和JS有什么区别

JSX 是 React 使用的一种文件类型，具备 JS 的表现力，并使用 HTML 作为模板语法。

简单来说，JSX是react的语法糖，它允许在html中写JS

注意它不能被浏览器直接识别，需要通过编译工具转换为JS执行

### 3、React 核心渲染机制

#### 3.1、什么是虚拟DOM

虚拟DOM本质上是以**JS对象**形式对真实DOM的描述

React每次状态变化时，会先构建新的虚拟DOM，然后和旧的虚拟DOM做**Diff**对比，找出变化的部分，最后只把变化的部分更新到真实DOM上，这样比直接操作真实DOM高效得多。

- 每当任何基础信息更改时，整个 UI 就会以虚拟 DOM 的形式重新渲染。
- 然后计算先前的 DOM 和新的 DOM 之间的区别。
- 计算完成后，只有实际更改的内容才会更新到真实 DOM。

#### 3.2、为什么要区分 render 和 commit？

Render和Commit，本质上是React架构中 ‘计算’与‘执行’的职责分离。

Render阶段通过Diff算法找出本次更新的具体变更。

Commit阶段将这些变更一次性应用到真实DOM上。

#### 3.3、说说 React commit 阶段的执行过程

commit 阶段是将更新应用到实际 DOM 的关键步骤。这个阶段处理在 render 阶段中计算出的所有副作用，并实际更新页面内容

详细执行过程：提交 Fiber 树、遍历 Fiber 树、应用副作用、处理生命周期方法和副作用、更新 Fiber 树、浏览器布局和绘制

#### 3.4、 Fiber

Fiber 是 React 内部所定义的一种数据结构，它是 Fiber 树结构的节点单位，也就是 React 16 新架构下的"虚拟 DOM"。

### 4、什么是hooks

hooks 是 React 中的一种新特性，它允许你在**函数组件**中使用状态（state）和副作用（effects）。(无需编写类即可使用状态等 React 功能。)

参阅<a href="/md?title=react钩子入门&tags=react&time=2023%2F4%2F25">react钩子入门</a>

#### 4.1、你常用的hooks

- useState：用于在函数组件中添加状态管理。

- useEffect：用于处理副作用操作（如数据获取、订阅、事件监听等）。

- useContext：用于在组件树中获取和使用共享的上下文。

#### 4.2、为什么 Hooks 不能写在条件里？

①从规则上说，React 要求 Hooks 必须在函数组件的顶层以完全相同的顺序被调用，不能在条件、循环或嵌套函数中调用。否则，React 会在开发环境下直接抛出错误。

②从 React Hooks 的源码实现来看，Hooks 的状态是与组件实例相关联的。每次组件重新渲染时，React 会使用相同的顺序来调用 Hooks，这样才能确保正确地管理组件的状态。

如果我们将 Hook 放在条件语句中，那么当条件不满足时，这个 Hook 就不会被调用，就会导致后续所有 Hook 的调用顺序整体错位，从而让 React 取错之前存储的状态，引发难以追踪的bug。

③从设计目的来看，这条规则确保了只要输入相同，组件输出的行为就相同

### 5、说说 React 生命周期有哪些不同阶段？每个阶段对应的方法是？

类组件的生命周期有：挂载、更新、卸载

函数式组件本身是没有生命周期的，是用useEffect（使用不同的参数和条件）模拟生命周期函数

```js
useEffect(() => {
  // 挂载后的操作
  // 相当于 componentDidMount
  return () => {
    // 在组件即将卸载时执行清理操作
    // 相当于 componentWillUnmount
  };
}, []);
```

```js
useEffect(() => {
  // 组件更新后的操作
  // 相当于 componentDidUpdate

  return () => {
    // 在组件即将卸载时执行清理操作
    // 相当于 componentWillUnmount
  };
}, [dependency]);
```

### 6、说说react的事件机制

- 进行浏览器兼容，实现更好的跨平台

  React 合成事件（SyntheticEvent）是 React 模拟原生 DOM 事件所有能力的一个事件对象，即浏览器原生事件的跨浏览器包装器。

- 减少内存开销

  `React`上注册的事件最终会绑定根节点上，而不是`React`组件对应的`DOM`

### 7、什么是props

props 用于将数据从父级传递到子级或由组件本身传递。它们是不可变的，因此不会更改。

props 是不可变的。因为它们是基于纯函数的概念开发的。在纯函数中，我们无法更改参数数据。因此在 ReactJS 中也无法更改 props 的数据。

#### 7.1、 react组件通信

由于React是单向数据流，主要思想是组件不会改变接收的数据，只会监听数据的变化，因此，数据的存储位置一般都是存放在上级位置中

父组件在调用子组件的时候，只需要在子组件标签内传递参数，子组件通过props属性就能接收父组件传递过来的参数。

如果组件之间关系类型比较复杂的情况，建议将数据进行一个全局资源管理，从而实现通信。

(待优化)

### 8、源码

没有系统性探索源码细节，但具备必要的源码级思维，在项目中会从运行机制的角度理解它的设计

### 9、React边界

一是CPU密集型计算（如图像处理），必须交给Web Worker，防止阻塞主线程；二是大规模、高性能的图形渲染（如万级数据点的可视化图表），必须使用Canvas或WebGL直接操作，因为框架的虚拟DOM Diff成本在这种情况下是灾难性的。此时，React/Vue应退化为‘应用组装层’，负责调度和组装这些原生模块。

### 引用

> [React面试问题](https://github.com/febobo/web-interview)
