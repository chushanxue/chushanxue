## 前言

工作两年以后，更加深刻地意识到，计算机网络是一门实用学科，不仅仅是在应试上占有一席之地

网上找到的总结大多枯燥、名词堆砌不好理解，所以回到大学课程，进行系统学习，本文作整理笔记📒

[配套教程链接](https://www.bilibili.com/video/BV1c4411d7jb/?spm_id_from=333.337.search-card.all.click&vd_source=2b211224d72ed36d88f40e2d2a243144) [课程配套笔记](https://github.com/BloothOfYouth/Computer-Network-Notes/blob/master/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC1%E7%AB%A0%EF%BC%88%E6%A6%82%E8%BF%B0%EF%BC%89.md)

## 第一章：概述

- 计算机网络已由一种**通信基础设施**发展成为一种重要的**信息服务基础设施**
- 计算机网络已经像水，电，煤气这些基础设施一样，成为我们生活中不可或缺的一部分

### 1、因特网概述

- 网络（Network）由若干 **结点（Node）** 和连接这些结点的 **链路（Link）** 组成。

  `笔记本电脑+台式电脑+网络打印机+交换机=网络`

- 多个网络通过路由器互连起来，这样就构成了一个覆盖范围更大的网络，即互连网（互联网）。因此，互联网又称为“网络的网络（Network of Networks）”。

  `网络+网络+路由器=互联网`

  > 路由器是一种专用计算机，但我们不称它为主机，路由器是实现**分组交换**的关键构建，其任务是**转发收到的分组**，这是网络核心部分最重要的功能。

- 因特网（Internet）是世界上最大的互连网络（用户数以亿计，互连的网络数以百万计）。

  `连接在因特网上的计算机称为主机（Host）`

  - 边缘部分：由所有连接在因特网上的主机组成（台式电脑，大型服务器，笔记本电脑，平板，智能手机等）。这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享。
  - 核心部分：由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换）。

![ ](https://github.com/BloothOfYouth/Computer-Network-Notes/raw/master/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC1%E7%AB%A0%EF%BC%88%E6%A6%82%E8%BF%B0%EF%BC%89.assets/20201016103744.png)

- 因特网服务提供者ISP(Internet Service Provider)

  `中国的三大ISP：中国电信，中国联通和中国移动`

  `一旦某个用户能够接入到因特网，那么他也可以成为一个ISP，所需要做的就是购买一些如调制解调器或路由器这样的设备，让其他用户可以和他相连。`

  > 普通用户是如何接入到因特网的呢？
  >
  > 答：通过ISP接入
  >
  > 因特网ISP可以从因特网管理机构申请到**成块的IP地址**，同时拥有通信线路以及路由器等联网设备。任何机构和个人只需缴纳费用，就可从ISP的得到所 需要的IP地址。
  >
  > 因特网上的主机都必须有IP地址才能进行通信，这样就可以通过该ISP接入到因特网。相隔较远的两台主机间的通信可能要经过多个ISP。

### 2、三种交换方式

**从通信资源的分配角度来看，交换就是按照某种方式动态地分配传输线路的资源。**

- 电路交换

  **电话交换机**接通电话线的方式称为电路交换

  电路交换的三个步骤：建立连接（分配资源）、通话（一直占用通信资源）、释放连接（释放资源）

  - 优点：**通信时延小**、有序传播、没有冲突、适用范围广、实时性强、控制简单
  - 缺点：建立连接时间长、线路独占，使用效率低、灵活性差、难以规格化

- 分组交换

  > 通常我们把表示消息的整块数据称为一个**报文**。
  >
  > 在发送报文之前，先把较长的报文划分成一个个更小的等长数据段，在每一个数据段前面。加上一些由必要的控制信息组成的首部后，就构成一个分组，也可简称为“包”，相应地，首部也可称为“包头”（首部包含了分组的目的地址，作用是寻址）。
  >
  > 分组从源主机到目的主机，可走不同的路径。

  - 发送方：构造分组、发送分组
  - 路由器：缓存分组、转发分组
  - 接收方：接收分组、还原报文

  整个报文先传送到相邻结点交换机，全部存储下来后进行查表转发，转发到下一个结点交换机。（不需要事先建立连接）

  - 优点：无需建立连接、线路利用率高、加速存储、减少出错率和重发数据量
  - 缺点：引起了转发时延、需要传输额外的信息量、对于数据报服务，存在失序、丢失或重复分组的问题，对于虚电路服务，...

- 报文交换（仅作了解）

  报文交换中的交换结点也采用存储转发方式，但报文交换**对报文的大小没有限制**，这就要求交换结点需要较大的缓存空间。报文交换主要用于早期的电报通信网，现在较少使用，通常被较先进的分组交换方式所取代。

  > 习题中需要注意的是，如果限制了传输速率和报文大小，且报文需要分组的，分组交换会比报文交换少用一半的时间多一秒。因为分组能同时发送多个分组后的报文，而报文交换一次只能发送一个分组。（可以理解为，报文交换本身不具备分组能力，它需要分组是因为传输能力限制，第二组要等着第一组走完再走，分组交换是第一组走了，第二组能继续走）

### 3、计算机网络定义和分类

- 计算机网络的最简单的定义是：一些互相连接的、自治的计算机的集合。

  - 互连：是指计算机之间可以通过有线或无线的方式进行数据通信；
  - 自治：是指独立的计算机，他有自己的硬件和软件，**可以单独运行使用**；
  - 集合：是指**至少需要两台计算机**；

- 按交换技术分类：

  - 电路交换网络
  - 报文交换网络
  - 分组交换网络

- 按使用者分类：

  - 公用网
  - 专用网

- 按传输介质分类：

  - 有线网络
  - 无线网络

- 按覆盖范围分类：

  - 广域网WAN（Wide Area Network）
  - 城域网MAN
  - 局域网LAN
  - 个域网PAN

  > 若中央处理机之间的距离非常近，仅1米的数量集甚至更小，则一般称之为多处理机系统，而不称它为计算机网络

- 按拓扑结构分类：
  - 总线型网络
  - 星型网络
  - 环形网络
  - 网状型网络

### 4、计算机网络的性能指标

常见的计算机网络的性能指标有8个：速率、带宽、吞吐量、时延、时延带宽积、往返时间、利用率、丢包率

- 速率

  - 比特

    比特(bit、简写为b)是数据量的单位，一个比特就是二进制数字中的一个1或0，数据量的其他常用单位有字节(Byte、简写为B)

    `8 bit=1 Byte` `1 KB=1024 B = 2^10 B`

    > 某些产品容量的GB和操作系统的GB不是一个单位，所以会出现，标250GB，在电脑上看实际只有232GB

  - 速率（比特率）

    `bit/s(b/s、bps)`

    `kb/s=10^3 b/s`

    > 需要注意的是，比特率中的k与比特中的k不同，可以理解为比特是给专业计算机人用的，比特率是给大众看的，本质上，数据容量和速率本就是不同的表示方法，容量采用二进制表示，所以是以二为底的指数

- 带宽

  带宽是指单位时间内，能传送的**最高速率**，它不是计算出来的值，而是一个指标，和速率的单位一样

  带宽用来表示网络的通信线路传送数据的能力，直接关系到我们的网络应用体验

  > 如果说速率指的是水流，那么带宽指的是水管的粗细

- 吞吐量

  吞吐量表示在**单位时间**内通过某个网络（或信道、接口）的**数据量**，它也不是计算出来的值，是一个指标

  吞吐量被经常用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。

  吞吐量受网络的带宽或额定速率的限制。

- 时延

  发送时延、【传播时延、处理时延】\*n

> 木桶效应：在构建网络时，应该做到各设备间以及传输介质的速率匹配，这样才能发挥出本应具有的传输性能

- 时延带宽积

  时延（传播时延）与带宽的乘积

- 往返时间RTT

  双向交互所需的时间

- 利用率

  - 信道利用率
  - 网络利用率

- 丢包率

  即分组丢失率，指在一定的时间范围内，传输过程中丢失的分组数量与总分组数量的比率

  丢包率反应了网络的拥塞情况，一般来说，丢包率越低，网络拥塞程度越低，丢包率越高，网络拥塞程度越高，且通常使网络应用无法正常使用

### 5、计算机网络的体系结构（重点）

tcp/ip体系结构：

- 网络接口层
- 网际层(**ip协议**：将不同的网络接口进行互连，并向其上的tcp/udp协议提供网络互连服务)
- 运输层(tcp/udp协议：向应用层的相应协议提供可靠传输服务 )
- 应用层（http/dns...）

> tcp/ip体系结构的网络接口层并没有规定具体的内容， 目的是可以互连全世界各种不同的网络接口（有线以太网/无线局域网），因此，本质上tcp/ip体系结构只有上面的三层

五层协议原理体系结构（方便教学 ）：【物理层、数据链路层】、网络层、运输层、应用层

- 应用层：解决通过应用进程的交互来实现特定网络应用的问题
- 运输层：解决进程之间基于网络的通信问题
- 网络层：解决分组在多个网络上传输（路由）的问题
- 数据链路层：解决分组在一个网络（或一段链路）上传输的问题
- 物理层：解决使用何种信号来传输比特的问题

举个例子：浏览器向服务器请求网页

- 应用层：构建一个HTTP请求报文，交付给运输层处理
- 运输层：给HTTP请求报文添加一个TCP首部，使之成为TCP报文段，交付给网络层处理
- 网络层：给TCP报文段添加一个IP首部，使之成为IP数据报，交付给数据链路层处理
- 数据链路层：给IP数据报添加一个首部和一个尾部，使之成为帧，交付给物理层处理
- 物理层：物理层会将帧看作比特流，并在比特流前面添加前导码，变换成相应的信号发送到传输媒体

信号通过传输媒体到达**路由器**，以下是路由器的处理过程

- 路由器（物理层）将信号转换成比特流，去掉前导码后，交付给数据链路层处理（帧）
- 数据链路层将帧的首部和尾部去掉后，交付给网络层处理（IP数据报）
- 网络层解析IP数据报的首部，从中提取出目的网络地址，查找自身路由表，确定转发端口，以便进行转发
- 网络层将IP数据报交付给数据链路层，给IP数据报添加一个首部和一个尾部，使之成为帧，交付给物理层处理
- 物理层将帧看作比特流，并在比特流前面添加前导码，变换成相应的信号发送到传输媒体，

信号通过传输媒体到**达web服务器**，以下是web服务器的处理过程

- web服务器（物理层）将信号转换成比特流，去掉前导码后，交付给数据链路层处理（帧）
- 数据链路层将帧的首部和尾部去掉后，交付给网络层处理（IP数据报）
- 网络层去掉IP数据报的首部，将其交付给运输层处理（TCP报文段）
- 运输层将TCP报文段去掉首部后，交付给应用层处理（HTTP请求报文）
- 应用层对HTTP报文进行解析，然后给主机发回HTTP响应报文
