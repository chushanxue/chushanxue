### 前言

http的八股文大多是围绕着tcp与http的关系、以及tcp与http各自的知识点。

### 1、请简述 HTTP 请求的过程（输入URL到看见页面发生了什么）

HTTP 请求的过程包括**从客户端发起请求到服务器响应**的完整流程。

- DNS解析

  客户端将域名（如`www.example.com`）解析为 IP 地址。这个过程通常通过 DNS（域名系统）完成。

- 建立 TCP 连接

  客户端与服务器**建立 TCP 连接**，通常通过**三次握手**过程（SYN, SYN-ACK, ACK）。

- 发送 HTTP 请求

  客户端**通过 TCP 连接**向服务器发送 HTTP 请求。

- 服务器处理请求

  服务器接收到 HTTP 请求后，解析请求行和请求头，处理请求，并根据请求的资源生成响应。这个过程包括：

  - 解析请求头
  - 执行相关的逻辑（如访问数据库、处理数据）
  - 生成响应内容

- 服务器发送 HTTP 响应

  服务器通过 TCP 连接将 HTTP 响应返回给客户端。HTTP 响应包括状态行、响应头、响应体

- 关闭 TCP 连接（或保持连接）

  客户端和服务器可以选择关闭 TCP 连接（如果 HTTP 版本是 1.0 或未设置 Connection: keep-alive）或保持连接以供后续请求（如果 HTTP 版本是 1.1 或设置了 Connection: keep-alive）。

- 客户端处理响应

  客户端接收到 HTTP 响应后，解析状态行、响应头和响应体，进行进一步处理（如更新页面内容）。

### 2、TCP和HTTP请求之间有什么关系？

简单来说：HTTP负责“说什么”，TCP负责“把话传到”。

- TCP是基础通信设施，像电话线或高速公路，负责**建立可靠连接和传输原始数据**。
- HTTP是**高级应用协议**，像通话时双方使用的语言和对话内容，它利用TCP提供的可靠通道来传递具体的网页请求和内容。

#### ①一个TCP链接可以对应多少个HTTP请求？

一个TCP链接可以对应多个HTTP请求，只要这个TCP链接没有断开，就可以发送HTTP请求。

#### ②这些HTTP请求可以同时发送，同时响应么，在一个TCP链接中？比如：三个HTTP请求同时发送，同时接收响应。

“三个HTTP请求同时发送，同时接收响应”的理想场景，正是HTTP/2和HTTP/3的核心设计目标，并且在现代互联网中已经成为主流

在HTTP/1.1时代，单个TCP链接在同一时刻只能处理一个请求。

HTTP/2.0 提供了多路复用。可以在一个TCP链接中同时发起多个HTTP请求，同时响应多个HTTP请求。

HTTP/3，把底层的运输协议从TCP换成了基于UDP的QUIC，每个HTTP请求/响应对应一个独立的QUIC流。所以，在HTTP/3下，不仅可以在一个连接中同时进行多个请求/响应，而且它们之间的相互影响降到了最低，性能最好。

#### ③并发请求的数量有没有限制？

有严格限制，主要是为了防止浏览器过度消耗服务器资源。HTTP/1.1限制每域名6个连接，HTTP/2后限制大大放宽（默认限制100个流，Chrome和Edge最新版已统一为256个）

#### ④HTTP的长连接和短连接分别是什么？keep-alive是干什么的

HTTP的长连接和短连接实际上是TCP的长连接和短连接，HTTP属于应用层协议。

- 短连接：浏览器和服务器每进行一次HTPP操作，就建立一个连接，但任务结束就会中断这个连接
- 长连接：数据传输完成了保持TCP连接不断开，等待在**同域名**下继续用这个通道传输数据。（服务器可以利用这个连接**主动推送**消息到客户端/SSE）

HTTP头部有了Connection: Keep-Alive这个值，代表**客户端期望这次请求是长连接**的。但是并不代表一定会使用长连接，服务器端都可以无视这个值，也就是不按标准来。**实现长连接要客户端和服务端都支持长连接**。

### 3、TCP 和 UDP的区别是什么？

TCP 和 UDP 在**连接方式、可靠性、开销、速度和适用场景**等方面都有所不同。在实际应用中，需要根据具体的需求和场景选择合适的网络传输协议。

- 连接方式：TCP 是面向连接的协议，需要在通信前建立连接，而 UDP 是无连接的协议，可以直接发送数据包。
- 可靠性：TCP 保证传输数据的可靠性，能够保证所有数据到达目的地且顺序正确；UDP 不保证传输数据的可靠性，可能会出现数据丢失或乱序等问题。
- 速度：由于 TCP 需要保证数据的可靠性，因此传输速度可能会受到一定的影响；UDP 没有这个限制，传输速度快。
- 开销：TCP 在传输过程中要维护连接状态、进行流量控制、拥塞控制等操作，因此开销较大；UDP 没有这些机制，传输开销较小。
- 适用场景：TCP 适用于对可靠性要求较高的应用场景，如文件传输、邮件传输等；而 UDP 适用于实时性要求较高的应用场景，如语音、视频、游戏等。

### 4、说说对 HTTP3 的了解

Google基于**UDP**开发出了新的协议QUIC，希望取代TCP提高传输效率，后经过协商将QUIC协议更名为HTTP/3。

UDP比TCP相比效率更高但并不具备传输可靠性，QUIC看中UDP传输效率这一特性，并结合了TCP、HTTP/2的优势，加以优化。

集成 TLS（传输层安全性）及现代加密算法

### 5、说说你对“三次握手”、“四次挥手”的理解

我们都知道TCP是**面向连接**的，三次握手是用来建立连接，四次挥手就是用来断开连接的。

可以把客户端和服务器之间的TCP连接，想象成两个人打电话。

三次握手：A邀请B，B同意并邀请A，A最后确认 —— 建立信任。

四次挥手：A说要走，B说“知道了”（但B可能没说完），B说完也要走，A说“好的再见” —— 礼貌道别。

> 注意如果问到为什么不是二次握手或者三次挥手，都可以从上述的理解中回答。

### 6、什么是DNS劫持？

DNS劫持 是指攻击者通过某种手段，**篡改了域名解析的结果**，使得用户访问一个域名时，被引导到了一个错误的、恶意的IP地址上。

用户输入的网址（域名）是对的，但最终到达的网站是假的。

#### 6.1、常见 DNS 劫持手段又有哪些

本地设备劫持、路由器劫持、中间人攻击、DNS服务器劫持（最严重的一种）

病毒或恶意软件感染电脑/手机，修改了系统的 hosts文件 或 本地DNS设置。

#### 6.2、DNS劫持的目的是什么

钓鱼诈骗、插入广告、流量劫持、窃听、传播恶意软件

#### 6.3、如何发现和防范DNS劫持

如何发现：访问知名网站（如百度、淘宝）时，突然出现奇怪的广告、页面布局错乱、要求重新登录、或网址栏显示不是https而是http。

对于普通用户，最有效的防御措施就是：修改路由器和设备的DNS设置为可靠的公共DNS（并优先选择支持加密查询的），同时在任何时候都保持对非HTTPS网站的高度警惕。

### 7、DNS 预解析是什么？怎么实现？

DNS 预解析（DNS Prefetching）是一种优化技术，用于在用户**点击链接之前提前解析域名**，以减少页面加载时间。通过提前解析域名，浏览器能够在用户实际访问资源时更快地建立连接，从而提升用户体验。

- dns-prefetch

  `<link rel="dns-prefetch" href="https://baidu.com/">`

### 8、网络模型分层大概有哪些层级

OSI参考模型包含七层：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层。

TCP/IP参考模型包含四层：网络接口层、网络层、传输层、应用层。

### 9、Blob，ArrayBuffer，Base64 有什么区别？

### 10、get请求和post请求的区别

- GET请求：主要用于从服务器获取资源，通常用于查询数据，而不对服务器产生影响
- POST请求：通常用于向服务器提交数据，对服务器状态产生影响

- GET请求：将参数附加在URL的末尾（Query String），以键值对的形式出现，可在浏览器地址栏直接看到。
- POST请求：将参数放在请求体中传输，对用户来说是不可见的。这使得POST请求能够传输大量数据，并且不会受到URL长度的限制。

- GET请求：可以被缓存
- POST请求：通常不会被缓存

- GET请求：更适用于获取资源和查询数据，例如搜索查询、读取数据等。
- POST请求：更适用于提交数据和对服务器产生影响的操作，例如表单提交、文件上传、更新资源等。
