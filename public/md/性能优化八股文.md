### 1、SPA（单页应用）首屏加载速度慢怎么解决？

- 代码分割（实操性最强）

  使用Webpack或Vite等打包工具进行**代码分割**，按需加载模块，减少首屏需要加载的代码量。

- 按需引入第三方库、删掉没用的代码
- 首屏css尽量写成内联样式
- 懒加载

  - 懒加载是一种延迟加载的策略，仅在用户需要时才加载特定的资源，而不是一次性加载所有资源。
  - 懒加载通常应用于图片、视频或者长页面中的其它资源，以减少初始页面加载时间
  - 当用户滚动到可见区域时，懒加载会异步加载这些资源，提供更好的用户体验。

- 预加载（注意，非首屏优化策略，写在这里只是和懒加载做对比）

  - 预加载是指在页面加载过程中提前加载将来可能会用到的资源，以减少后续请求的延迟。
  - 预加载可以是针对当前页面需要的资源，也可以是跳转到其他页面所需资源，如下一页面的CSS、JavaScript、图像等。
  - 预加载框架或库可以根据需求进行配置，以指定哪些资源需要在加载页面时提前加载。
  - 适合预加载的时间是在页面已经加载了必要的资源，并且可靠预测到后续页面将需要的额外资源时。通常在页面加载过程中或页面初始加载完成后立即进行预加载是比较合适的，以确保资源的及时下载。

- 静态资源优化、托管

  - 压缩CSS、JavaScript和图片等静态资源，减少资源体积和加载时间。
  - 使用Gzip或Brotli等压缩算法。
  - 将静态资源托管到CDN（内容分发网络）上，利用其分布式节点，提升资源加载速度

- 减少HTTP请求

  合并请求，使用雪碧图（Sprite）或图标字体（Icon Font）等技术，减少资源请求数量。

- 服务端渲染

  使用Next.js或Nuxt.js等框架实现服务端渲染，将首屏内容提前渲染成 HTML，减少浏览器的渲染时间。

### 2、为什么 SSE 流式更新不会卡 UI

不会阻塞UI渲染。本质上它和setTimeout一样是**异步**的

回调异步执行，不阻塞主线程

```js
eventSource.onerror = (err) => {
  // 可以在这里添加日志，但不用手动重连
  console.log('连接出错，浏览器将自动重连');
};
```

### 3、重绘 / 重排你是怎么避免的？

核心思路是减少DOM操作的次数和范围，尽量批量读写样式，让浏览器在一次性布局中完成所有计算。

使用虚拟DOM技术：React/Vue等框架的核心优势

css方面：使用transform和opacity

### 4、前端性能优化大总结

- 网络层：缓存、压缩、CDN托管、减少HTTP请求
- 构建层：代码分割、懒加载
- 渲染层：减少重排重绘、服务端渲染
- 框架层：合理使用 key、computed
- 业务层：列表虚拟化

## 引用

> [预加载和懒加载的区别，预加载在什么时间加载合适？](https://zhuanlan.zhihu.com/p/641078842)
